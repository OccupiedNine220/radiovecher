@echo off
setlocal enabledelayedexpansion

echo ⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡
echo ⚡⚡⚡⚡⚡⚡⚡⚡ РАДИО ВЕЧЕР - ЗАПУСК!!! ⚡⚡⚡⚡⚡⚡⚡⚡
echo ⚡⚡⚡ ЛУЧШИЙ МУЗЫКАЛЬНЫЙ БОТ В МИРЕ!!! ⚡⚡⚡
echo ⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡⚡
echo.

REM 🔍 ПРОВЕРКА НАЛИЧИЯ PYTHON - ВАЖНЕЙШИЙ КОМПОНЕНТ!!! 🔍
python --version >nul 2>&1
if %errorlevel% neq 0 (
    echo ❌❌❌ КРИТИЧЕСКАЯ ОШИБКА!!! Python НЕ УСТАНОВЛЕН!!! ❌❌❌
    echo 📥 НЕМЕДЛЕННО СКАЧАЙТЕ И УСТАНОВИТЕ Python 3.10 или 3.11 с сайта python.org
    echo ⚠️ ВНИМАНИЕ: НЕ УСТАНАВЛИВАЙТЕ Python 3.13!!! ОН НЕСОВМЕСТИМ С НЕКОТОРЫМИ БИБЛИОТЕКАМИ!!! ⚠️
    echo.
    echo 👉 НАЖМИТЕ ЛЮБУЮ КЛАВИШУ ДЛЯ ВЫХОДА И ИСПРАВЬТЕ ЭТУ ПРОБЛЕМУ СЕЙЧАС ЖЕ!!!
    pause >nul
    exit /b 1
)

REM 🔢 ПРОВЕРКА ВЕРСИИ PYTHON - ТОЛЬКО ПРОВЕРЕННЫЕ ВЕРСИИ!!! 🔢
for /f "tokens=2" %%I in ('python --version 2^>^&1') do set "PYTHON_VERSION=%%I"
echo ✅ ОБНАРУЖЕН Python !PYTHON_VERSION!!! ОТЛИЧНО!!!

REM ⚠️ ПРОВЕРКА, ЧТО ВЕРСИЯ НЕ 3.13 - ОНА НЕ ПОДХОДИТ!!! ⚠️
echo !PYTHON_VERSION! | findstr "^3.13" >nul
if %errorlevel% equ 0 (
    echo ❌❌❌ КАТАСТРОФА!!! ОБНАРУЖЕН Python 3.13!!! ЭТО НЕДОПУСТИМО!!! ❌❌❌
    echo ⚠️ ЭТА ВЕРСИЯ Python НЕСОВМЕСТИМА С ИСПОЛЬЗУЕМЫМИ БИБЛИОТЕКАМИ!!! ⚠️
    echo 📥 УДАЛИТЕ ЕЕ И УСТАНОВИТЕ Python 3.10 или Python 3.11 НЕМЕДЛЕННО!!!
    echo.
    echo 👉 НАЖМИТЕ ЛЮБУЮ КЛАВИШУ ДЛЯ ВЫХОДА И ИСПРАВЬТЕ ЭТУ ПРОБЛЕМУ СЕЙЧАС ЖЕ!!!
    pause >nul
    exit /b 1
)

REM 📄 ПРОВЕРКА НАЛИЧИЯ ФАЙЛА .env - ХРАНИЛИЩЕ СЕКРЕТОВ!!! 📄
if not exist .env (
    echo ❌❌❌ КРИТИЧЕСКАЯ ОШИБКА!!! ФАЙЛ .env НЕ НАЙДЕН!!! ❌❌❌
    echo 📝 СОЗДАЙТЕ ФАЙЛ .env НА ОСНОВЕ .env.example И ЗАПОЛНИТЕ ВСЕ ПАРАМЕТРЫ!!!
    echo ⚠️ БЕЗ ЭТОГО ФАЙЛА БОТ НЕ СМОЖЕТ РАБОТАТЬ!!! ЭТО АРХИВАЖНО!!! ⚠️
    echo.
    echo 👉 НАЖМИТЕ ЛЮБУЮ КЛАВИШУ ДЛЯ ВЫХОДА И СОЗДАЙТЕ ФАЙЛ ПРЯМО СЕЙЧАС!!!
    pause >nul
    exit /b 1
)

REM 🏠 ПРОВЕРКА НАЛИЧИЯ ВИРТУАЛЬНОЙ СРЕДЫ - ИЗОЛИРОВАННЫЙ МИР ДЛЯ БОТА!!! 🏠
if not exist venv (
    echo 🔨 СОЗДАНИЕ ВИРТУАЛЬНОЙ СРЕДЫ Python - ЭТО ЗАЙМЕТ НЕСКОЛЬКО СЕКУНД!!! 🔨
    python -m venv venv
    if %errorlevel% neq 0 (
        echo ❌❌❌ ОШИБКА!!! НЕ УДАЛОСЬ СОЗДАТЬ ВИРТУАЛЬНУЮ СРЕДУ Python!!! ❌❌❌
        echo ⚠️ ВОЗМОЖНО, У ВАС НЕДОСТАТОЧНО ПРАВ!!! ЗАПУСТИТЕ ОТ ИМЕНИ АДМИНИСТРАТОРА!!! ⚠️
        echo.
        echo 👉 НАЖМИТЕ ЛЮБУЮ КЛАВИШУ ДЛЯ ВЫХОДА И ПОПРОБУЙТЕ СНОВА!!!
        pause >nul
        exit /b 1
    )
)

REM 🔌 АКТИВАЦИЯ ВИРТУАЛЬНОЙ СРЕДЫ - ПОДКЛЮЧАЕМСЯ К ИЗОЛИРОВАННОМУ МИРУ!!! 🔌
call venv\Scripts\activate
if %errorlevel% neq 0 (
    echo ❌❌❌ ОШИБКА!!! НЕ УДАЛОСЬ АКТИВИРОВАТЬ ВИРТУАЛЬНУЮ СРЕДУ Python!!! ❌❌❌
    echo ⚠️ ВОЗМОЖНО, ФАЙЛЫ ПОВРЕЖДЕНЫ!!! УДАЛИТЕ ПАПКУ venv И ЗАПУСТИТЕ СКРИПТ СНОВА!!! ⚠️
    echo.
    echo 👉 НАЖМИТЕ ЛЮБУЮ КЛАВИШУ ДЛЯ ВЫХОДА И ПОПРОБУЙТЕ СНОВА!!!
    pause >nul
    exit /b 1
)

REM 📦 УСТАНОВКА ЗАВИСИМОСТЕЙ - МНОЖЕСТВО ПОЛЕЗНЫХ БИБЛИОТЕК!!! 📦
echo 📥 УСТАНОВКА НЕОБХОДИМЫХ БИБЛИОТЕК - ЭТО МОЖЕТ ЗАНЯТЬ ВРЕМЯ!!! НАБЕРИТЕСЬ ТЕРПЕНИЯ!!! 📥
pip install -r requirements.txt
if %errorlevel% neq 0 (
    echo ❌❌❌ ОШИБКА!!! НЕ УДАЛОСЬ УСТАНОВИТЬ НЕОБХОДИМЫЕ БИБЛИОТЕКИ!!! ❌❌❌
    echo ⚠️ ПРОВЕРЬТЕ ПОДКЛЮЧЕНИЕ К ИНТЕРНЕТУ!!! БЕЗ ЭТИХ БИБЛИОТЕК БОТ НЕ ЗАРАБОТАЕТ!!! ⚠️
    echo.
    echo 👉 НАЖМИТЕ ЛЮБУЮ КЛАВИШУ ДЛЯ ВЫХОДА И ПОПРОБУЙТЕ СНОВА!!!
    pause >nul
    exit /b 1
)

REM ☕ ПРОВЕРКА НАЛИЧИЯ JAVA ДЛЯ LAVALINK - ДЛЯ СУПЕР-КАЧЕСТВЕННОГО ЗВУКА!!! ☕
java -version >nul 2>&1
if %errorlevel% neq 0 (
    echo ⚠️ ПРЕДУПРЕЖДЕНИЕ!!! Java НЕ УСТАНОВЛЕНА!!! ⚠️
    echo 📣 ДЛЯ РАБОТЫ С LAVALINK НЕОБХОДИМА Java 11 ИЛИ ВЫШЕ!!! БЕЗ НЕЕ КАЧЕСТВО ЗВУКА БУДЕТ ХУЖЕ!!!
    echo 🔈 БОТ БУДЕТ РАБОТАТЬ С ОГРАНИЧЕННОЙ ФУНКЦИОНАЛЬНОСТЬЮ!!! ЗВУК МОЖЕТ БЫТЬ НЕ ТАКИМ ИДЕАЛЬНЫМ!!!
    echo.
    set "USE_LAVALINK=false"
) else (
    echo ✅ ОБНАРУЖЕНА Java!!! LAVALINK МОЖЕТ БЫТЬ ИСПОЛЬЗОВАН!!! ЗВУК БУДЕТ ИДЕАЛЬНЫМ!!!
    set "USE_LAVALINK=true"
)

REM 🚀 ЗАПУСК БОТА - САМЫЙ ВОЛНУЮЩИЙ МОМЕНТ!!! 🚀
echo.
echo 🎵🎵🎵 ЗАПУСК РАДИО ВЕЧЕР - ПОДГОТОВЬТЕСЬ К ИДЕАЛЬНОЙ МУЗЫКЕ!!! 🎵🎵🎵
echo.
python bot.py
if %errorlevel% neq 0 (
    echo.
    echo ❌❌❌ ОШИБКА!!! ПРОИЗОШЛА КРИТИЧЕСКАЯ ОШИБКА ПРИ ВЫПОЛНЕНИИ БОТА!!! ❌❌❌
    echo ⚠️ ПРОВЕРЬТЕ НАСТРОЙКИ И ПОПРОБУЙТЕ СНОВА!!! ВОЗМОЖНО, ПРОБЛЕМА В ФАЙЛЕ .env!!! ⚠️
    echo.
)

echo.
echo 👋 СПАСИБО ЗА ИСПОЛЬЗОВАНИЕ РАДИО ВЕЧЕР!!! НАЖМИТЕ ЛЮБУЮ КЛАВИШУ ДЛЯ ВЫХОДА!!!
pause >nul